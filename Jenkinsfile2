#!/usr/bin/env groovy

@Library('shared-library') _ //master or whatever branch

pipeline{

	agent any
	
	
        
        stages{

	      stage('Git Checkout'){
                   steps{
                        git credentialsId: 'git_ssh', url: 'https://github.com/Navya-Danvi/sample-web-application.git'
                   }
              }
		
              stage('maven build'){
                  steps{
                      script{
		    	                sh "mvn clean install"
                      	  }
               	     }  
                 }	
                 
                 stage ('Check logs') {
                    steps {
                        filterLogs ('INFO', 2)
                    }
                }
		
		stage ('EMAIL') {
                    steps {
                        emailext body: '''Build # $BUILD_NUMBER - $BUILD_STATUS:

                        Check console output at $BUILD_URL to view the results.''', subject: '$PROJECT_NAME - Build # $BUILD_NUMBER - $BUILD_STATUS!', to: 'gcptutlearn@gmail.com'
                    }
                }
		
           }	       	     	         
}
